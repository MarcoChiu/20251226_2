import{u as x,f as u,r as j,j as s,e as f,l as b,s as v}from"./index-DWMnWU1Y.js";import{u as N}from"./index.esm-C-0Wtn8f.js";import{a as g,s as w}from"./sweetAlert-BB8DS3-L.js";const S=()=>{const m=x(),c=u(),{register:r,handleSubmit:n,formState:{errors:a}}=N(),[i,l]=j.useState(!1),d=async o=>{l(!0);try{const e=await b({username:o.email,password:o.password}),{token:t,expired:p}=e;if(t){await g("success","登入成功"),v(t,p);const h=c.state?.from?.pathname||"/";m(h,{replace:!0})}}catch(e){w("error","登入失敗",e.response?.data?.message||"發生錯誤")}finally{l(!1)}};return s.jsxs(s.Fragment,{children:[i&&s.jsx(f,{}),s.jsx("div",{className:"container mt-5",children:s.jsx("div",{className:"row justify-content-center",children:s.jsx("div",{className:"col-md-6 col-lg-4",children:s.jsx("div",{className:"card shadow-sm",children:s.jsxs("div",{className:"card-body",children:[s.jsx("h2",{className:"card-title text-center mb-4",children:"登入"}),s.jsxs("form",{onSubmit:n(d),children:[s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{htmlFor:"email",className:"form-label",children:"Email"}),s.jsx("input",{type:"email",className:`form-control ${a.email?"is-invalid":""}`,id:"email",placeholder:"請輸入email name@example.com",...r("email",{required:"Email 為必填",pattern:{value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,message:"Email 格式不正確"}})}),a.email&&s.jsx("div",{className:"invalid-feedback",children:a.email.message})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{htmlFor:"password",className:"form-label",children:"密碼"}),s.jsx("input",{type:"password",className:`form-control ${a.password?"is-invalid":""}`,id:"password",placeholder:"請輸入密碼",...r("password",{required:"密碼為必填"})}),a.password&&s.jsx("div",{className:"invalid-feedback",children:a.password.message})]}),s.jsx("div",{className:"d-grid gap-2",children:s.jsx("button",{type:"submit",className:"btn btn-primary",disabled:i,children:"登入"})})]})]})})})})})]})};export{S as default};
