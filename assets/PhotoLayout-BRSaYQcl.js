import{r as c,j as e,u as x,O as g,a as j}from"./index-CfEsAChn.js";const f=({onSearch:i,loading:a,error:l,remainingCalls:n})=>{const[s,r]=c.useState(""),h=o=>{o.preventDefault(),s.trim()&&i(s.trim())},d=o=>{r(o.target.value)};return e.jsxs("div",{children:[e.jsx("h4",{children:"搜尋照片"}),e.jsxs("form",{onSubmit:h,className:"mb-3",children:[e.jsxs("div",{className:"input-group",children:[e.jsx("input",{type:"text",className:"form-control",placeholder:"輸入搜尋關鍵字 (至少3個字)",value:s,onChange:d,disabled:a}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:a||s.length<3,children:a?"搜尋中...":"搜尋"})]}),e.jsxs("small",{className:"form-text text-muted",children:["已輸入 ",s.length," 個字元 (需要至少 3 個)"]})]}),n!==null&&e.jsxs("div",{className:"alert alert-info",role:"alert",children:["剩餘 API 呼叫次數: ",n]}),l&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:l})]})},N="https://api.unsplash.com/search/photos/",v="Mjilp2VDqxCTCbkq9e6_1NA_43BXd60uD2T56bNMXV8",S=()=>{const[i,a]=c.useState([]),[l,n]=c.useState(!1),[s,r]=c.useState(null),[h,d]=c.useState(null),o=x(),p=async m=>{if(m.length<3){r("搜尋字串至少需要 3 個字元");return}n(!0),r(null);try{const t=await j.get(N,{params:{query:m,per_page:10,client_id:v}});a(t.data.results);const u=t.headers["x-ratelimit-remaining"];d(u),console.log("Photos fetched:",t.data.results),console.log("Remaining API calls:",u),o("/photo/detail")}catch(t){r(t.message),console.error("Error fetching photos:",t)}finally{n(!1)}};return e.jsx("div",{className:"container mt-3",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-4",children:e.jsx(f,{onSearch:p,loading:l,error:s,remainingCalls:h})}),e.jsx("div",{className:"col-8",children:e.jsx(g,{context:{photos:i,loading:l,error:s}})})]})})};export{S as default};
