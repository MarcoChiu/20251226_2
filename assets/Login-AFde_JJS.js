import{u as f,f as j,r as c,j as e,e as N,a as g,A as b,s as v}from"./index-CLextN1C.js";import{S as m}from"./sweetalert2.esm.all-BQxta0Da.js";const S=()=>{const d=f(),p=j(),[s,h]=c.useState({email:"",password:""}),[o,n]=c.useState(!1),i=r=>{const{name:a,value:t}=r.target;h(l=>({...l,[a]:t}))},u=async r=>{r.preventDefault(),n(!0);try{const a=await g.post(b.signin,{username:s.email,password:s.password}),{token:t,expired:l}=a.data;if(t){await m.fire({icon:"success",title:"登入成功",showConfirmButton:!1,timer:1500}),v(t,l);const x=p.state?.from?.pathname||"/";d(x,{replace:!0})}}catch(a){m.fire({icon:"error",title:"登入失敗",text:a.response?.data?.message||"發生錯誤"})}finally{n(!1)}};return e.jsxs(e.Fragment,{children:[o&&e.jsx(N,{}),e.jsx("div",{className:"container mt-5",children:e.jsx("div",{className:"row justify-content-center",children:e.jsx("div",{className:"col-md-6 col-lg-4",children:e.jsx("div",{className:"card shadow-sm",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h2",{className:"card-title text-center mb-4",children:"登入"}),e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"email",className:"form-label",children:"Email"}),e.jsx("input",{type:"email",className:"form-control",id:"email",name:"email",placeholder:"請輸入email name@example.com",value:s.email,onChange:i,required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"password",className:"form-label",children:"密碼"}),e.jsx("input",{type:"password",className:"form-control",id:"password",name:"password",placeholder:"請輸入密碼",value:s.password,onChange:i,required:!0})]}),e.jsx("div",{className:"d-grid gap-2",children:e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:o,children:"登入"})})]})]})})})})})]})};export{S as default};
