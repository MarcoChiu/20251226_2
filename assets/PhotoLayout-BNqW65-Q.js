import{r as i,j as e,a as x,u as g,O as j}from"./index-_groiTb1.js";const f=({onSearch:a,loading:n,error:r,remainingCalls:l})=>{const[s,o]=i.useState(""),h=c=>{c.preventDefault(),s.trim()&&a(s.trim())},d=c=>{o(c.target.value)};return e.jsxs("div",{children:[e.jsx("h4",{children:"搜尋照片"}),e.jsxs("form",{onSubmit:h,className:"mb-3",children:[e.jsxs("div",{className:"input-group",children:[e.jsx("input",{type:"text",className:"form-control",placeholder:"輸入搜尋關鍵字 (至少3個字)",value:s,onChange:d,disabled:n}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n||s.length<3,children:n?"搜尋中...":"搜尋"})]}),e.jsxs("small",{className:"form-text text-muted",children:["已輸入 ",s.length," 個字元 (需要至少 3 個)"]})]}),l!==null&&e.jsxs("div",{className:"alert alert-info",role:"alert",children:["剩餘 API 呼叫次數: ",l]}),r&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:r})]})},N="https://api.unsplash.com/search/photos/",v="Mjilp2VDqxCTCbkq9e6_1NA_43BXd60uD2T56bNMXV8",b=async a=>await x.get(N,{params:{query:a,per_page:10,client_id:v}}),y=()=>{const[a,n]=i.useState([]),[r,l]=i.useState(!1),[s,o]=i.useState(null),[h,d]=i.useState(null),c=g(),p=async m=>{if(m.length<3){o("搜尋字串至少需要 3 個字元");return}l(!0),o(null);try{const t=await b(m);n(t.data.results);const u=t.headers["x-ratelimit-remaining"];d(u),console.log("Photos fetched:",t.data.results),console.log("Remaining API calls:",u),c("/photo/detail")}catch(t){o(t.message),console.error("Error fetching photos:",t)}finally{l(!1)}};return e.jsx("div",{className:"container mt-3",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-4",children:e.jsx(f,{onSearch:p,loading:r,error:s,remainingCalls:h})}),e.jsx("div",{className:"col-8",children:e.jsx(j,{context:{photos:a,loading:r,error:s}})})]})})};export{y as default};
